/*! Fabrik */
define(["jquery","fab/element"],function(l,t){return window.FbDropdown=new Class({Extends:t,initialize:function(t,e){this.setPlugin("fabrikdropdown"),this.parent(t,e),!0===this.options.allowadd&&!1!==this.options.editable&&(this.watchAddToggle(),this.watchAdd())},watchAddToggle:function(){var t,e,i=this.getContainer(),n=i.getElement("div.addoption"),d=i.getElement(".toggle-addoption");this.mySlider&&(t=n.clone(),e=i.getElement(".fabrikElement"),n.getParent().destroy(),e.adopt(t),(n=i.getElement("div.addoption")).setStyle("margin",0),(e=n.getElement("input[name*=_additions]")).id=this.element.id+"_additions",e.name=this.element.id+"_additions"),this.mySlider=new Fx.Slide(n,{duration:500}),this.mySlider.hide(),d.addEvent("click",function(t){t.stop(),this.mySlider.toggle()}.bind(this))},addClick:function(t){var e=this.getContainer(),i=e.getElement("input[name=addPicklistLabel]"),e=e.getElement("input[name=addPicklistValue]"),n=i.value,d=e?e.value:n;""===d||""===n?window.alert(Joomla.JText._("PLG_ELEMENT_DROPDOWN_ENTER_VALUE_LABEL")):(new Element("option",{selected:"selected",value:d}).set("text",n).inject(document.id(this.element.id)),t.stop(),e&&(e.value=""),i.value="",this.addNewOption(d,n),document.id(this.element.id).fireEvent("change",{stop:function(){}}),this.mySlider&&this.mySlider.toggle(),this.options.advanced&&l("#"+this.element.id).trigger("chosen:updated"))},watchAdd:function(){var t;!0===this.options.allowadd&&!1!==this.options.editable&&(this.element.id,t=this.getContainer(),this.addClickEvent&&t.getElement("input[type=button]").removeEvent("click",this.addClickEvent),this.addClickEvent=this.addClick.bind(this),t.getElement("input[type=button]").addEvent("click",this.addClickEvent))},getValue:function(){var e;return this.options.editable?"null"===typeOf(this.element.get("value"))?"":this.options.multiple?(e=[],this.element.getElements("option").each(function(t){t.selected&&e.push(t.value)}),e):this.element.get("value"):this.options.multiple?this.options.value:this.options.value[0]},reset:function(){var t=this.options.defaultVal;this.update(t)},update:function(t){var e,i=[];if("string"===typeOf(t)&&""===t&&(t="[]"),"string"===typeOf(t)&&JSON.validate(t)&&(t=JSON.parse(t)),"null"===typeOf(t)&&(t=[]),this.getElement(),"null"!==typeOf(this.element))if(this.options.element=this.element.id,this.options.editable){i=this.element.getElements("option"),"number"===typeOf(t)&&(t=t.toString());for(var n=0;n<i.length;n++)-1!==t.indexOf(i[n].value)?i[n].selected=!0:i[n].selected=!1;this.options.advanced&&l("#"+this.element.id).trigger("chosen:updated"),this.watchAdd()}else this.element.set("html",""),e=$H(this.options.data),t.each(function(t){this.element.innerHTML+=e.get(t)+"<br />"}.bind(this))},cloned:function(t){!0===this.options.allowadd&&!1!==this.options.editable&&(this.watchAddToggle(),this.watchAdd()),this.parent(t)}}),window.FbDropdown});
//# sourceMappingURL=dropdown-min.js.map