/*! Fabrik */
ace.define("ace/mode/xml",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/xml_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/xml"],function(e,t,n){function o(){this.$tokenizer=new a((new s).getRules()),this.$behaviour=new u,this.foldingRules=new l}var r=e("../lib/oop"),i=e("./text").Mode,a=e("../tokenizer").Tokenizer,s=e("./xml_highlight_rules").XmlHighlightRules,u=e("./behaviour/xml").XmlBehaviour,l=e("./folding/xml").FoldMode;r.inherits(o,i),function(){this.blockComment={start:"\x3c!--",end:"--\x3e"}}.call(o.prototype),t.Mode=o}),ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/xml_util","ace/mode/text_highlight_rules"],function(e,t,n){function o(){this.$rules={start:[{token:"text",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:"xml-pe",regex:"<\\?.*?\\?>"},{token:"comment",regex:"<\\!--",next:"comment"},{token:"xml-pe",regex:"<\\!.*?>"},{token:"meta.tag",regex:"<\\/?",next:"tag"},{token:"text",regex:"\\s+"},{token:"constant.character.entity",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],cdata:[{token:"text",regex:"\\]\\]>",next:"start"},{token:"text",regex:"\\s+"},{token:"text",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment",regex:".*?--\x3e",next:"start"},{token:"comment",regex:".+"}]},i.tag(this.$rules,"tag","start")}var r=e("../lib/oop"),i=e("./xml_util"),e=e("./text_highlight_rules").TextHighlightRules;r.inherits(o,e),t.XmlHighlightRules=o}),ace.define("ace/mode/xml_util",["require","exports","module"],function(e,t,n){function r(e,t){return[{token:"string",regex:e,next:t},{token:"constant.language.escape",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"},{defaultToken:"string"}]}t.tag=function(e,t,n,o){e[t]=[{token:"text",regex:"\\s+"},{token:o?function(e){return o[e]?"meta.tag.tag-name."+o[e]:"meta.tag.tag-name"}:"meta.tag.tag-name",regex:"[-_a-zA-Z0-9:]+",next:t+"_embed_attribute_list"},{token:"empty",regex:"",next:t+"_embed_attribute_list"}],e[t+"_qstring"]=r("'",t+"_embed_attribute_list"),e[t+"_qqstring"]=r('"',t+"_embed_attribute_list"),e[t+"_embed_attribute_list"]=[{token:"meta.tag.r",regex:"/?>",next:n},{token:"keyword.operator",regex:"="},{token:"entity.other.attribute-name",regex:"[-_a-zA-Z0-9:]+"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"text",regex:"\\s+"}].concat([{token:"string",regex:'"',next:t+"_qqstring"},{token:"string",regex:"'",next:t+"_qstring"}])}}),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator"],function(e,t,n){function s(e,t){var n=!0,o=e.type.split(".");return t.split(".").forEach(function(e){if(-1==o.indexOf(e))return n=!1}),n}function o(){this.inherit(a,["string_dquotes"]),this.add("autoclosing","insertion",function(e,t,n,o,r){if(">"==r){var r=n.getCursorPosition(),i=new u(o,r.row,r.column),a=i.getCurrentToken(),n=!1;if(a&&(s(a,"meta.tag")||s(a,"text")&&a.value.match("/")))n=!0;else for(;(a=i.stepBackward())&&(s(a,"string")||s(a,"keyword.operator")||s(a,"entity.attribute-name")||s(a,"text")););if(a&&s(a,"meta.tag-name")&&!i.stepBackward().value.match("/"))return o=a.value,{text:"></"+(o=n?o.substring(0,r.column-a.start):o)+">",selection:[1,1]}}}),this.add("autoindent","insertion",function(e,t,n,o,r){if("\n"==r){r=n.getCursorPosition();if("</"==o.doc.getLine(r.row).substring(r.column,r.column+2))return{text:"\n"+(n=this.$getIndent(o.doc.getLine(r.row))+o.getTabString())+"\n"+this.$getIndent(o.doc.getLine(r.row)),selection:[1,n.length,1,n.length]}}})}var r=e("../../lib/oop"),i=e("../behaviour").Behaviour,a=e("./cstyle").CstyleBehaviour,u=e("../../token_iterator").TokenIterator;r.inherits(o,i),t.XmlBehaviour=o}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){function m(){m.isSaneInsertion=function(e,t){var e=e.getCursorPosition(),n=new i(t,e.row,e.column);if(!this.$matchTokenType(n.getCurrentToken()||"text",a)){t=new i(t,e.row,e.column+1);if(!this.$matchTokenType(t.getCurrentToken()||"text",a))return!1}return n.stepForward(),n.getCurrentTokenRow()!==e.row||this.$matchTokenType(n.getCurrentToken()||"text",s)},m.$matchTokenType=function(e,t){return-1<t.indexOf(e.type||e)},m.recordAutoInsert=function(e,t,n){e=e.getCursorPosition(),t=t.doc.getLine(e.row);this.isAutoInsertedClosing(e,t,c[0])||(u=0),g=e.row,c=n+t.substr(e.column),u++},m.recordMaybeInsert=function(e,t,n){e=e.getCursorPosition(),t=t.doc.getLine(e.row);this.isMaybeInsertedClosing(e,t)||(d=0),f=e.row,h=t.substr(0,e.column)+n,x=t.substr(e.column),d++},m.isAutoInsertedClosing=function(e,t,n){return 0<u&&e.row===g&&n===c[0]&&t.substr(e.column)===c},m.isMaybeInsertedClosing=function(e,t){return 0<d&&e.row===f&&t.substr(e.column)===x&&t.substr(0,e.column)==h},m.popAutoInsertedClosing=function(){c=c.substr(1),u--},m.clearMaybeInsertedClosing=function(){d=0,f=-1},this.add("braces","insertion",function(e,t,n,o,r){var i=n.getCursorPosition(),a=o.doc.getLine(i.row);if("{"==r)return u=n.getSelectionRange(),""!==(u=o.doc.getTextRange(u))&&"{"!==u&&n.getWrapBehavioursEnabled()?{text:"{"+u+"}",selection:!1}:m.isSaneInsertion(n,o)?/[\]\}\)]/.test(a[i.column])?(m.recordAutoInsert(n,o,"}"),{text:"{}",selection:[1,1]}):(m.recordMaybeInsert(n,o,"{"),{text:"{",selection:[1,1]}):void 0;if("}"==r){var s=a.substring(i.column,i.column+1);if("}"==s)if(null!==o.$findOpeningBracket("}",{column:i.column+1,row:i.row})&&m.isAutoInsertedClosing(i,a,r))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else if("\n"==r||"\r\n"==r){var u="";if(m.isMaybeInsertedClosing(i,a)&&(u=l.stringRepeat("}",d),m.clearMaybeInsertedClosing()),"}"==(s=a.substring(i.column,i.column+1))||""!==u)return o.findMatchingBracket({row:i.row,column:i.column},"}")?{text:"\n"+(n=this.getNextLineIndent(e,a.substring(0,i.column),o.getTabString()))+"\n"+this.$getIndent(a)+u,selection:[1,n.length,1,n.length]}:null}}),this.add("braces","deletion",function(e,t,n,o,r){var i=o.doc.getTextRange(r);if(!r.isMultiLine()&&"{"==i){if("}"==o.doc.getLine(r.start.row).substring(r.end.column,r.end.column+1))return r.end.column++,r;d--}}),this.add("parens","insertion",function(e,t,n,o,r){if("("==r)return i=n.getSelectionRange(),""!==(i=o.doc.getTextRange(i))&&n.getWrapBehavioursEnabled()?{text:"("+i+")",selection:!1}:m.isSaneInsertion(n,o)?(m.recordAutoInsert(n,o,")"),{text:"()",selection:[1,1]}):void 0;if(")"==r){var i=n.getCursorPosition(),n=o.doc.getLine(i.row),a=n.substring(i.column,i.column+1);if(")"==a)if(null!==o.$findOpeningBracket(")",{column:i.column+1,row:i.row})&&m.isAutoInsertedClosing(i,n,r))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("parens","deletion",function(e,t,n,o,r){var i=o.doc.getTextRange(r);if(!r.isMultiLine()&&"("==i&&")"==o.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2))return r.end.column++,r}),this.add("brackets","insertion",function(e,t,n,o,r){if("["==r)return i=n.getSelectionRange(),""!==(i=o.doc.getTextRange(i))&&n.getWrapBehavioursEnabled()?{text:"["+i+"]",selection:!1}:m.isSaneInsertion(n,o)?(m.recordAutoInsert(n,o,"]"),{text:"[]",selection:[1,1]}):void 0;if("]"==r){var i=n.getCursorPosition(),n=o.doc.getLine(i.row),a=n.substring(i.column,i.column+1);if("]"==a)if(null!==o.$findOpeningBracket("]",{column:i.column+1,row:i.row})&&m.isAutoInsertedClosing(i,n,r))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("brackets","deletion",function(e,t,n,o,r){var i=o.doc.getTextRange(r);if(!r.isMultiLine()&&"["==i&&"]"==o.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2))return r.end.column++,r}),this.add("string_dquotes","insertion",function(e,t,n,o,r){if('"'==r||"'"==r){var i=r,a=n.getSelectionRange(),r=o.doc.getTextRange(a);if(""!==r&&"'"!==r&&'"'!=r&&n.getWrapBehavioursEnabled())return{text:i+r+i,selection:!1};var r=n.getCursorPosition(),s=o.doc.getLine(r.row);if("\\"==s.substring(r.column-1,r.column))return null;for(var u,l=o.getTokens(a.start.row),g=0,c=-1,d=0;d<l.length&&("string"==(u=l[d]).type?c=-1:c<0&&(c=u.value.indexOf(i)),!(u.value.length+g>a.start.column));d++)g+=l[d].value.length;if(!u||c<0&&"comment"!==u.type&&("string"!==u.type||a.start.column!==u.value.length+g-1&&u.value.lastIndexOf(i)===u.value.length-1))return m.isSaneInsertion(n,o)?{text:i+i,selection:[1,1]}:void 0;if(u&&"string"===u.type)if(s.substring(r.column,r.column+1)==i)return{text:"",selection:[1,1]}}}),this.add("string_dquotes","deletion",function(e,t,n,o,r){var i=o.doc.getTextRange(r);if(!r.isMultiLine()&&('"'==i||"'"==i)&&o.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)==i)return r.end.column++,r})}var o=e("../../lib/oop"),r=e("../behaviour").Behaviour,i=e("../../token_iterator").TokenIterator,l=e("../../lib/lang"),a=["text","paren.rparen","punctuation.operator"],s=["text","paren.rparen","punctuation.operator","comment"],u=0,g=-1,c="",d=0,f=-1,h="",x="";o.inherits(m,r),t.CstyleBehaviour=m}),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(e,t,n){var o=e("../../lib/oop"),a=e("../../lib/lang"),l=e("../../range").Range,r=e("./fold_mode").FoldMode,g=e("../../token_iterator").TokenIterator,e=t.FoldMode=function(e){r.call(this),this.voidElements=e||{}};o.inherits(e,r),function(){this.getFoldWidget=function(e,t,n){e=this._getFirstTagInLine(e,n);return e.closing?"markbeginend"==t?"end":"":!e.tagName||this.voidElements[e.tagName.toLowerCase()]||e.selfClosing||-1!==e.value.indexOf("/"+e.tagName)?"":"start"},this._getFirstTagInLine=function(e,t){for(var n=e.getTokens(t),o="",r=0;r<n.length;r++){var i=n[r];0===i.type.indexOf("meta.tag")?o+=i.value:o+=a.stringRepeat(" ",i.value.length)}return this._parseTag(o)},this.tagRe=/^(\s*)(<?(\/?)([-_a-zA-Z0-9:!]*)\s*(\/?)>?)/,this._parseTag=function(e){var t=e.match(this.tagRe);return{value:e,match:t?t[2]:"",closing:!!t&&!!t[3],selfClosing:!(!t||!t[5]&&"/>"!=t[2]),tagName:t?t[4]:"",column:t[1]?0+t[1].length:0}},this._readTagForward=function(e){var t=e.getCurrentToken();if(t){var n,o,r="";do{if(0===t.type.indexOf("meta.tag"))if(n=n||{row:e.getCurrentTokenRow(),column:e.getCurrentTokenColumn()},-1!==(r+=t.value).indexOf(">"))return(o=this._parseTag(r)).start=n,o.end={row:e.getCurrentTokenRow(),column:e.getCurrentTokenColumn()+t.value.length},e.stepForward(),o}while(t=e.stepForward())}return null},this._readTagBackward=function(e){var t=e.getCurrentToken();if(t){var n="";do{if(0===t.type.indexOf("meta.tag")){var o,r=r||{row:e.getCurrentTokenRow(),column:e.getCurrentTokenColumn()+t.value.length};if(-1!==(n=t.value+n).indexOf("<"))return(o=this._parseTag(n)).end=r,o.start={row:e.getCurrentTokenRow(),column:e.getCurrentTokenColumn()},e.stepBackward(),o}}while(t=e.stepBackward())}return null},this._pop=function(e,t){for(;e.length;){var n=e[e.length-1];if(!t||n.tagName==t.tagName)return e.pop();if(this.voidElements[t.tagName])return;if(!this.voidElements[n.tagName])return null;e.pop()}},this.getFoldWidgetRange=function(e,t,n){var o=this._getFirstTagInLine(e,n);if(!o.match)return null;var r,i=[];if(o.closing||o.selfClosing)for(var a=new g(e,n,o.column+o.match.length),s={row:n,column:o.column};r=this._readTagBackward(a);){if(r.selfClosing){if(i.length)continue;return r.start.column+=r.tagName.length+2,r.end.column-=2,l.fromPoints(r.start,r.end)}if(r.closing)i.push(r);else if(this._pop(i,r),0==i.length)return r.start.column+=r.tagName.length+2,l.fromPoints(r.start,s)}else for(var a=new g(e,n,o.column),u={row:n,column:o.column+o.tagName.length+2};r=this._readTagForward(a);){if(r.selfClosing){if(i.length)continue;return r.start.column+=r.tagName.length+2,r.end.column-=2,l.fromPoints(r.start,r.end)}if(r.closing){if(this._pop(i,r),0==i.length)return l.fromPoints(u,r.start)}else i.push(r)}}}.call(e.prototype)});
//# sourceMappingURL=mode-xml-min.js.map