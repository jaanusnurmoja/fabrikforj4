/*! Fabrik */
ace.define("ace/ext/whitespace",["require","exports","module","ace/lib/lang"],function(e,n,t){var m=e("../lib/lang");n.$detectIndentation=function(e,t){function n(e){for(var t=0,n=e;n<r.length;n+=e)t+=r[n]||0;return t}for(var r=[],i=[],a=0,s=0,o=Math.min(e.length,1e3),c=0;c<o;c++){var g=e[c];if(/^\s*[^*+\-\s]/.test(g)){g.match(/^\t*/)[0].length;"\t"==g[0]&&a++;var h,l=g.match(/^ */)[0].length;for(l&&"\t"!=g[l]&&(!(0<(h=l-s))||s%h||l%h||(i[h]=(i[h]||0)+1),r[l]=(r[l]||0)+1),s=l;"\\"==g[g.length-1];)g=e[c++]}}for(var f,u,d=i.reduce(function(e,t){return e+t},0),m={score:0,length:0},v=0,c=1;c<12;c++)f=1==c?(v=n(c),1):n(c)/v,i[c]&&(f+=i[c]/d),f>m.score&&(m={score:f,length:c});return m.score&&1.4<m.score&&(u=m.length),v+1<a?{ch:"\t",length:u}:a<v+1?{ch:" ",length:u}:void 0},n.detectIndentation=function(e){var t=e.getLines(0,1e3),t=n.$detectIndentation(t)||{};return t.ch&&e.setUseSoftTabs(" "==t.ch),t.length&&e.setTabSize(t.length),t},n.trimTrailingSpace=function(e){for(var t=e.getDocument(),n=t.getAllLines(),r=0,i=n.length;r<i;r++){var a=n[r],s=a.search(/\s+$/);-1!==s&&t.removeInLine(r,s,a.length)}},n.convertIndentation=function(e,t,n){for(var r=e.getTabString()[0],i=e.getTabSize(),a=(n=n||i,"\t"==(t=t||r)?t:m.stringRepeat(t,n)),s=e.doc,o=s.getAllLines(),c={},g={},h=0,l=o.length;h<l;h++){var f,u,d=o[h].match(/^\s*/)[0];d&&(f=(u=e.$getStringScreenWidth(d)[0])%i,u=c[u=Math.floor(u/i)]||(c[u]=m.stringRepeat(a,u)),(u+=g[f]||(g[f]=m.stringRepeat(" ",f)))!=d)&&(s.removeInLine(h,0,d.length),s.insertInLine({row:h,column:0},u))}e.setTabSize(n),e.setUseSoftTabs(" "==t)},n.$parseStringArg=function(e){var t={},e=(/t/.test(e)?t.ch="\t":/s/.test(e)&&(t.ch=" "),e.match(/\d+/));return e&&(t.length=parseInt(e[0])),t},n.$parseArg=function(e){return e?"string"==typeof e?n.$parseStringArg(e):"string"==typeof e.text?n.$parseStringArg(e.text):e:{}},n.commands=[{name:"detectIndentation",exec:function(e){n.detectIndentation(e.session)}},{name:"trimTrailingSpace",exec:function(e){n.trimTrailingSpace(e.session)}},{name:"convertIndentation",exec:function(e,t){n.$parseArg(t);n.convertIndentation(e.session,t.ch,t.length)}},{name:"setIndentation",exec:function(e,t){t=n.$parseArg(t);t.length&&e.session.setTabSize(t.length),t.ch&&e.session.setUseSoftTabs(" "==t.ch)}}]});
//# sourceMappingURL=ext-whitespace-min.js.map