/*! Fabrik */
ace.define("ace/ext/emmet",["require","exports","module","ace/keyboard/hash_handler","ace/editor","ace/config"],function(t,i,e){function n(){}var a,o,s=t("ace/keyboard/hash_handler").HashHandler,r=t("ace/editor").Editor,c=(r.prototype.indexToPosition=function(t){return this.session.doc.indexToPosition(t)},r.prototype.positionToIndex=function(t){return this.session.doc.positionToIndex(t)},n.prototype={setupContext:function(t){this.ace=t,this.indentation=t.session.getTabString(),(a=a||window.emmet).require("resources").setVariable("indentation",this.indentation),this.$syntax=null,this.$syntax=this.getSyntax()},getSelectionRange:function(){var t=this.ace.getSelectionRange();return{start:this.ace.positionToIndex(t.start),end:this.ace.positionToIndex(t.end)}},createSelection:function(t,e){this.ace.selection.setRange({start:this.ace.indexToPosition(t),end:this.ace.indexToPosition(e)})},getCurrentLineRange:function(){var t=this.ace.getCursorPosition().row,e=this.ace.session.getLine(t).length,t=this.ace.positionToIndex({row:t,column:0});return{start:t,end:t+e}},getCaretPos:function(){var t=this.ace.getCursorPosition();return this.ace.positionToIndex(t)},setCaretPos:function(t){t=this.ace.indexToPosition(t);this.ace.clearSelection(),this.ace.selection.moveCursorToPosition(t)},getCurrentLine:function(){var t=this.ace.getCursorPosition().row;return this.ace.session.getLine(t)},replaceContent:function(t,e,n,i){null==n&&(n=null==e?this.getContent().length:e),null==e&&(e=0);var o=a.require("utils"),i=(i||(t=o.padString(t,o.getLinePaddingFromPosition(this.getContent(),e))),a.require("tabStops").extract(t,{escape:function(t){return t}})),o=(t=i.text,i.tabstops[0]),i=(o?(o.start+=e,o.end+=e):o={start:t.length+e,end:t.length+e},this.ace.getSelectionRange());i.start=this.ace.indexToPosition(e),i.end=this.ace.indexToPosition(n),this.ace.session.replace(i,t),i.start=this.ace.indexToPosition(o.start),i.end=this.ace.indexToPosition(o.end),this.ace.selection.setRange(i)},getContent:function(){return this.ace.getValue()},getSyntax:function(){var t,e;return this.$syntax||(("html"==(t=this.ace.session.$modeId.split("/").pop())||"php"==t)&&(e=this.ace.getCursorPosition(),e="string"!=typeof(e=this.ace.session.getState(e.row))?e[0]:e)&&(1<(e=e.split("-")).length?t=e[0]:"php"==t&&(t="html")),t)},getProfileName:function(){switch(this.getSyntax()){case"css":return"css";case"xml":case"xsl":return"xml";case"html":return a.require("resources").getVariable("profile")||(-1!=this.ace.session.getLines(0,2).join("").search(/<!DOCTYPE[^>]+XHTML/i)?"xhtml":"html")}return"xhtml"},prompt:function(t){return prompt(t)},getSelection:function(){return this.ace.session.getTextRange()},getFilePath:function(){return""}},{expand_abbreviation:{mac:"ctrl+alt+e",win:"alt+e"},match_pair_outward:{mac:"ctrl+d",win:"ctrl+,"},match_pair_inward:{mac:"ctrl+j",win:"ctrl+shift+0"},matching_pair:{mac:"ctrl+alt+j",win:"alt+j"},next_edit_point:"alt+right",prev_edit_point:"alt+left",toggle_comment:{mac:"command+/",win:"ctrl+/"},split_join_tag:{mac:"shift+command+'",win:"shift+ctrl+`"},remove_tag:{mac:"command+'",win:"shift+ctrl+;"},evaluate_math_expression:{mac:"shift+command+y",win:"shift+ctrl+y"},increment_number_by_1:"ctrl+up",decrement_number_by_1:"ctrl+down",increment_number_by_01:"alt+up",decrement_number_by_01:"alt+down",increment_number_by_10:{mac:"alt+command+up",win:"shift+alt+up"},decrement_number_by_10:{mac:"alt+command+down",win:"shift+alt+down"},select_next_item:{mac:"shift+command+.",win:"shift+ctrl+."},select_previous_item:{mac:"shift+command+,",win:"shift+ctrl+,"},reflect_css_value:{mac:"shift+command+r",win:"shift+ctrl+r"},encode_decode_data_url:{mac:"shift+ctrl+d",win:"ctrl+'"},expand_abbreviation_with_tab:"Tab",wrap_with_abbreviation:{mac:"shift+ctrl+a",win:"shift+ctrl+a"}}),m=new n;for(o in i.commands=new s,i.runEmmetCommand=function(e){if(m.setupContext(e),"php"==m.getSyntax())return!1;var t=a.require("actions");if("expand_abbreviation_with_tab"==this.action&&!e.selection.isEmpty())return!1;if("wrap_with_abbreviation"==this.action)return setTimeout(function(){t.run("wrap_with_abbreviation",m)},0);try{var n=t.run(this.action,m)}catch(t){e._signal("changeStatus","string"==typeof t?t:t.message),console.log(t)}return n},c)i.commands.addCommand({name:"emmet:"+o,action:o,bindKey:c[o],exec:i.runEmmetCommand,multiSelectAction:"forEach"});function h(t,e){var n;e&&(n=(n=e.session.$modeId)&&/css|less|sass|html|php/.test(n),(n=!1===t.enableEmmet?!1:n)?e.keyBinding.addKeyboardHandler(i.commands):e.keyBinding.removeKeyboardHandler(i.commands))}i.AceEmmetEditor=n,t("ace/config").defineOptions(r.prototype,"editor",{enableEmmet:{set:function(t){this[t?"on":"removeListener"]("changeMode",h),h({enableEmmet:!!t},this)},value:!0}}),i.setCore=function(t){a=t}});
//# sourceMappingURL=ext-emmet-min.js.map