/*! Fabrik */
define(["jquery","fab/loader","fab/requestqueue"],function(r,e,t){var o=r(document),c=(document.addEvent("click:relay(.popover button.close)",function(e,t){var t="#"+t.get("data-popover"),o=document.getElement(t);r(t).popover("hide"),"null"!==typeOf(o)&&"input"===o.get("tag")&&(o.checked=!1)}),{events:{}});function n(){const t=document.getElementById("filter_form");var e=document.getElementById("filter_group");const o=t.value;Array.from(e.getElementsByTagName("optgroup")).forEach(e=>{e.style.display=e.label===t.options[t.selectedIndex].text||""===o?"block":"none"})}return document.body.classList.contains("com_fabrik")&&(document.body.classList.contains("view-elements")||document.body.classList.contains("view-groups"))&&768<=window.innerWidth&&document.querySelectorAll(".js-stools-container-filters").forEach(e=>{e.classList.add("js-stools-container-filters-visible")}),window.location.href.includes("view=elements")&&(document.getElementById("filter_form").addEventListener("change",n),n()),c.bootstrapVersion=function(e){for(var t=[e||"modal","tooltip"],o=t.length,n=0;n<o;++n){var i=r.fn[t[n]];if(i){if(i.VERSION)return i.VERSION.match(/(\d+)\./)[0].toInt();if(i.Constructor&&i.Constructor.VERSION)return i.Constructor.VERSION.match(/(\d+)\./)[0].toInt()}}return 2},c.Windows={},c.loader=new e,c.blocks={},c.periodicals={},c.addBlock=function(e,t){c.blocks[e]=t,c.fireEvent("fabrik.block.added",[t,e])},c.getBlock=function(e,t,o){return(o=o||!1)&&(c.periodicals[e]=c._getBlock.periodical(500,this,[e,t,o])),c._getBlock(e,t,o)},c._getBlock=function(e,t,o){var n;if(t=t||!1,void 0!==c.blocks[e])n=e;else{if(t)return!1;var t=Object.keys(c.blocks),i=t.searchFor(e);if(-1===i)return!1;n=t[i]}return o&&(clearInterval(c.periodicals[e]),o(c.blocks[n])),c.blocks[n]},o.on("click",".fabrik_delete a, .fabrik_action a.delete, .btn.delete",function(e){e.rightClick||c.watchDelete(e,this)}),o.on("click",".fabrik_edit a, a.fabrik_edit",function(e){e.rightClick||c.watchEdit(e,this)}),o.on("click",".fabrik_view a, a.fabrik_view",function(e){e.rightClick||c.watchView(e,this)}),document.addEvent("click:relay(*[data-fabrik-view])",function(e,t){var o;e.rightClick||(e.preventDefault(),o=(o=(e="a"===e.target.get("tag")?e.target:"null"!==typeOf(e.target.getElement("a"))?e.target.getElement("a"):e.target.getParent("a")).get("href"))+(o.contains("?")?"&tmpl=component&ajax=1":"?tmpl=component&ajax=1")+"&format=partial",$H(c.Windows).each(function(e,t){e.close()}),e={id:"view."+o,title:e.get("title")||Joomla.JText._("COM_FABRIK_VIEW"),loadMethod:"xhr",contentURL:o},c.getWindow(e))}),c.removeEvent=function(e,t){c.events[e]&&-1!==(t=c.events[e].indexOf(t))&&delete c.events[e][t]},c.addEvent=c.on=function(e,t){c.events[e]||(c.events[e]=[]),c.events[e].contains(t)||c.events[e].push(t)},c.addEvents=function(e){for(var t in e)e.hasOwnProperty(t)&&c.addEvent(t,e[t]);return this},c.fireEvent=c.trigger=function(e,t,o){var n=c.events;return this.eventResults=[],n&&n[e]&&(t=Array.mfrom(t),n[e].each(function(e){o?this.eventResults.push(e.delay(o,this,t)):this.eventResults.push(e.apply(this,t))},this)),this},c.requestQueue=new t,c.cbQueue={google:[]},c.loadGoogleMap=function(e,t,o){var n=("https:"===document.location.protocol?"https:":"http:")+"//maps.googleapis.com/maps/api/js?libraries=places,visualization&callback=Fabrik.mapCb";!1!==e&&(n+="&key="+e),""!==o&&(n+="&language="+o),0===Array.mfrom(document.scripts).filter(function(e){return e.src===n}).length?((e=document.createElement("script")).type="text/javascript",e.src=n,document.body.appendChild(e),c.cbQueue.google.push(t)):c.googleMap?window[t]():c.cbQueue.google.push(t)},c.mapCb=function(){var e,t;for(c.googleMap=!0,t=0;t<c.cbQueue.google.length;t++)e=c.cbQueue.google[t],"function"===typeOf(e)?e():window[e]();c.cbQueue.google=[]},c.watchDelete=function(e,t){var o,n,i=e.target.getParent(".fabrik_row");(i=i||c.activeRow)?(n=i.getElement("input[type=checkbox][name*=id]"),"null"!==typeOf(n)&&(n.checked=!0),n=(n=i.id.split("_")).splice(0,n.length-2).join("_"),o=c.blocks[n]):(n=e.target.getParent(".fabrikList"),"null"!==typeOf(n)?(n=n.id,o=c.blocks[n]):(n=(i=t.getParent(".floating-tip-wrapper"))?i.retrieve("list").id:t.get("data-listRef"),void 0===(o=c.blocks[n])||"floating"!==o.options.actionMethod||this.bootstrapped||o.form.getElements("input[type=checkbox][name*=id], input[type=checkbox][name=checkAll]").each(function(e){e.checked=!0}))),o.submit("list.delete")||e.preventDefault()},c.watchEdit=function(e,t){c.openSingleView("form",e,t)},c.watchView=function(e,t){c.openSingleView("details",e,t)},c.openSingleView=function(t,e,o){var n,i,a=r(o).data("list"),l=c.blocks[a];if(1===r(o).data("isajax")){if(l){if(!l.options.ajax_links)return;if(!(i=l.getActiveRow(e))||0===i.length)return;l.setActive(i),n=i.prop("id").split("_").pop()}else n=r(o).data("rowid");e.preventDefault(),e=(i="A"===r(e.target).prop("tagName")?r(e.target):0<r(e.target).find("a").length?r(e.target).find("a"):r(e.target).closest("a")).prop("href"),1!==r(o).data("iscustom")&&(e=e+(e.contains("?")?"&tmpl=component&ajax=1":"?tmpl=component&ajax=1")+"&format=partial"),o=i.prop("title"),void 0===(i=i.data("loadmethod"))&&(i="xhr"),r.each(c.Windows,function(e,t){t.close()}),o={modalId:"ajax_links",id:a+"."+n,title:o,loadMethod:i,contentURL:e,onClose:function(){var e=t+"_"+l.options.formid+"_"+n;try{c.blocks[e].destroyElements(),c.blocks[e].formElements=null,c.blocks[e]=null,delete c.blocks[e],c.fireEvent("details"===t?"fabrik.list.row.view.close":"fabrik.list.row.edit.close",[a,n,e])}catch(e){console.log(e)}}},l&&(""!==l.options.popup_width&&(o.width=l.options.popup_width),""!==l.options.popup_height&&(o.height=l.options.popup_height),o.id="details"===t?"view."+o.id:"add."+o.id,null!==l.options.popup_offset_x&&(o.offset_x=l.options.popup_offset_x),null!==l.options.popup_offset_y)&&(o.offset_y=l.options.popup_offset_y),c.getWindow(o)}},c.timePickerClose=function(e,t){var o,n;e&&0<(n=r(e).closest("form")).length&&(n=c.getBlock(n[0].id))&&0<(o=r(e).closest(".fabrikSubElementContainer")).length&&(n=n.formElements.get(o[0].id))&&n.hideTime(e,t)},c.Array={chunk:function(e,t){for(var o=[],n=0,i=e.length;n<i;n+=t)o.push(e.slice(n,n+t));return o}},window.fireEvent("fabrik.loaded"),window.Fabrik=c});
//# sourceMappingURL=fabrik.js.map